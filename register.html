<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Course Platform - Register</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            color: #333;
        }
    </style>
    <!-- Google Tag Manager (GTM) Script - Replace GTM_ID with your actual GTM Container ID -->
    <script>
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-XXXXXXX'); // IMPORTANT: Replace GTM-XXXXXXX with your GTM ID
    </script>
    <!-- End Google Tag Manager -->
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-4">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <header class="w-full max-w-xl bg-white shadow-lg rounded-xl p-8 mb-8 text-center">
        <h1 class="text-4xl font-extrabold text-indigo-700 mb-4">Join Our Community</h1>
        <p class="text-lg text-gray-700">Fill out the form below to create your account and start learning!</p>
    </header>

    <main class="w-full max-w-xl bg-white shadow-lg rounded-xl p-8">
        <form id="registrationForm" class="space-y-6">
            <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
                <input type="text" id="name" name="name" class="form-input mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="John Doe" required>
            </div>
            <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                <input type="email" id="email" name="email" class="form-input mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="you@example.com" required>
            </div>
            <div>
                <label for="password" class="block text-sm font-medium text-gray-700 mb-1">Password</label>
                <input type="password" id="password" name="password" class="form-input mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required minlength="6">
            </div>
            <div>
                <label for="confirm-password" class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
                <input type="password" id="confirm-password" name="confirm-password" class="form-input mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" required minlength="6">
            </div>
            <div id="errorMessage" class="text-red-600 text-sm text-center hidden"></div>
            <div>
                <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-md shadow-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-indigo-300 focus:ring-opacity-75">
                    Create Account
                </button>
            </div>
        </form>
    </main>

    <footer class="w-full max-w-xl mt-8 p-6 text-center text-gray-600 text-sm">
        &copy; 2025 Online Course Platform. All rights reserved.
    </footer>

    <script>
        // Data Layer Helper Function
        function pushToDataLayer(event_name, event_parameters) {
            window.dataLayer = window.dataLayer || [];
            window.dataLayer.push({
                event: event_name,
                ...event_parameters
            });
            console.log(`GA4 Event Sent: ${event_name}`, event_parameters);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Event: Page View (for Registration Page)
            pushToDataLayer('page_view', {
                page_path: window.location.pathname,
                page_title: document.title,
                page_location: window.location.href,
                course_platform_page_type: 'registration_page',
                user_intent: 'register'
            });

            const registrationForm = document.getElementById('registrationForm');
            const formInputs = registrationForm.querySelectorAll('input');
            const errorMessageDiv = document.getElementById('errorMessage');

            // Event: 'form_field_focused'
            // Tracks when a user interacts with a form input field.
            formInputs.forEach(input => {
                input.addEventListener('focus', function() {
                    pushToDataLayer('form_field_focused', {
                        event_category: 'Form Interaction',
                        event_label: `Focused on ${this.id || this.name} field`,
                        field_name: this.id || this.name,
                        page_path: window.location.pathname
                    });
                });
            });

            // Handle form submission
            registrationForm.addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent default form submission

                // Event: 'form_submission_attempt'
                // Tracks every attempt to submit the form, regardless of validation success.
                pushToDataLayer('form_submission_attempt', {
                    event_category: 'Form Submission',
                    event_label: 'Registration Form Submitted',
                    form_id: 'registrationForm',
                    page_path: window.location.pathname
                });

                // Simple client-side validation
                const name = document.getElementById('name').value.trim();
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirm-password').value;

                let isValid = true;
                let message = '';

                if (name === '' || email === '' || password === '' || confirmPassword === '') {
                    isValid = false;
                    message = 'Please fill in all fields.';
                } else if (password.length < 6) {
                    isValid = false;
                    message = 'Password must be at least 6 characters long.';
                } else if (password !== confirmPassword) {
                    isValid = false;
                    message = 'Passwords do not match.';
                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) { // Basic email regex
                    isValid = false;
                    message = 'Please enter a valid email address.';
                }

                if (isValid) {
                    // Simulate successful registration
                    console.log('Registration successful!');
                    // Event: 'registration_successful'
                    // Tracks successful user registrations.
                    pushToDataLayer('registration_successful', {
                        event_category: 'Conversion',
                        event_label: 'User Registered Successfully',
                        form_id: 'registrationForm',
                        user_email: email, // IMPORTANT: Be mindful of PII. For real GA, hash or generalize email.
                        page_path: window.location.pathname
                    });

                    // Redirect to thank you page after a slight delay for event to process
                    setTimeout(() => {
                        window.location.href = 'thankyou.html';
                    }, 100);

                } else {
                    // Event: 'registration_failed'
                    // Tracks when registration fails due to validation errors.
                    pushToDataLayer('registration_failed', {
                        event_category: 'Form Submission',
                        event_label: 'Registration Failed - Validation Error',
                        form_id: 'registrationForm',
                        error_message: message,
                        page_path: window.location.pathname
                    });
                    errorMessageDiv.textContent = message;
                    errorMessageDiv.classList.remove('hidden');
                }
            });
        });
    </script>
</body>
</html>
